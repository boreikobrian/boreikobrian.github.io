class f{canvas;context;lines=[];size=50;duration=4e3;startTime=0;animationFrameId=0;constructor(t){this.canvas=t,this.context=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",this.handleResize.bind(this)),this.initGrid()}handleResize(){this.resizeCanvas(),this.play()}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.size=Math.floor(Math.min(this.canvas.width,this.canvas.height)/20),this.updateGridLines()}initGrid(){this.context!==null&&this.updateGridLines()}updateGridLines(){if(this.context===null)return;const t=-5,e=this.canvas.width,i=this.canvas.height;this.lines.length=0;for(let n=t;n<=i;n+=this.size){const o=new r(this.context,0,n,0,n);o.animateTo({x:e/2},this.duration,c.easeInOutQuad),this.lines.push(o);const h=new r(this.context,e,n,e,n);h.animateTo({x:e/2},this.duration,c.easeInOutQuad),this.lines.push(h)}for(let n=t;n<=e;n+=this.size){const o=new r(this.context,n,0,n,0);o.animateTo({y:i/2},this.duration,c.easeInOutQuad),this.lines.push(o);const h=new r(this.context,n,i,n,i);h.animateTo({y:i/2},this.duration,c.easeInOutQuad),this.lines.push(h)}}animate(t){const e=Math.min(1,(t-this.startTime)/this.duration);this.context!==null&&(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.lines.forEach(i=>{i.draw(e)}),e<1?this.animationFrameId=requestAnimationFrame(this.animate.bind(this)):this.animationFrameId=0)}play(){this.startTime=performance.now(),this.animate(this.startTime)}}const c={easeInOutQuad:(s,t,e,i)=>(s/=i/2,s<1?e/2*s*s+t:(s--,-e/2*(s*(s-2)-1)+t))};class x{animation=null;animateTo(t,e,i){this.animation={target:t,duration:e,easing:i}}_getAnimatedProperty(t,e,i){if(this.animation?.target[t]!==void 0){const n=this.animation.target[t]-i;return this.animation.easing(e*this.animation.duration,i,n,this.animation.duration)}return i}}class r extends x{constructor(t,e,i,n,o){super(),this.context=t,this.startX=e,this.startY=i}startX;startY;draw(t){const e=this._getAnimatedProperty("x",t,this.startX),i=this._getAnimatedProperty("y",t,this.startY);this.context.beginPath(),this.context.moveTo(this.startX,this.startY),this.context.lineTo(e,i),this.context.strokeStyle="rgba(128, 128, 128, 0.44)",this.context.stroke()}}const l=document.querySelector("#grid");if(l){const s=new f(l),t=new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&(s.play(),t.unobserve(l))})},{threshold:.5});t.observe(l)}else console.error("No se encontrÃ³ el elemento 'canvas'");const g=document.querySelectorAll(".tabbutton"),w=document.querySelectorAll(".tabcontent");g.forEach(s=>{s.addEventListener("click",()=>{g.forEach(t=>{t.classList.toggle("active")}),w.forEach(t=>{t.classList.toggle("active")})})});class y{canvas;context;stars=[];mousePosition={x:-1e3,y:-1e3};SPACING=18;starRadius=1;influenceRadius=80;canvasWidth;canvasHeight;starColor="255, 255, 255";constructor(t){this.canvas=t,this.context=this.canvas?.getContext("2d")??null,this.canvasWidth=this.getCanvasWidth(),this.canvasHeight=this.getCanvasHeight(),this.context!==null?(this.initStars(),this.resizeCanvas(),this.drawStars(),this.addEventListeners(),this.observeThemeChanges()):console.error("El contexto 2D no se pudo obtener."),window.addEventListener("resize",this.onResize.bind(this),!1)}getCanvasWidth(){return this.canvas.clientWidth}getCanvasHeight(){return this.canvas.clientHeight}resizeCanvas(){this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight}initStars(){this.stars=[];for(let t=-5;t<this.canvasWidth;t+=this.SPACING)for(let e=-5;e<this.canvasHeight;e+=this.SPACING)this.stars.push({x:t,y:e,originalX:t,originalY:e,alpha:Math.random(),speed:Math.random()*.005+.002})}drawStars(){this.context!==null&&this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.stars.forEach(t=>{const e=this.mousePosition.x-t.x,i=this.mousePosition.y-t.y,n=Math.sqrt(e*e+i*i);if(n<this.influenceRadius){const o=Math.atan2(i,e),h=(this.influenceRadius-n)/this.influenceRadius;t.x=t.originalX-Math.cos(o)*h*20,t.y=t.originalY-Math.sin(o)*h*20}else t.x+=(t.originalX-t.x)*.05,t.y+=(t.originalY-t.y)*.05;t.alpha+=t.speed,(t.alpha>1||t.alpha<0)&&(t.speed=-t.speed),this.context!==null&&(this.context.fillStyle=`rgba(${this.starColor}, ${Math.abs(t.alpha)})`,this.context.beginPath(),this.context.arc(t.x,t.y,this.starRadius,0,Math.PI*2),this.context.fill())}),requestAnimationFrame(this.drawStars.bind(this))}addEventListeners(){this.canvas.parentElement?.addEventListener("mousemove",this.onMouseMove.bind(this)),this.canvas.parentElement?.addEventListener("mouseleave",this.onMouseLeave.bind(this))}onMouseMove(t){const e=this.canvas.getBoundingClientRect();this.mousePosition.x=t.clientX-e.left,this.mousePosition.y=t.clientY-e.top}onMouseLeave(){this.mousePosition.x=-1e3,this.mousePosition.y=-1e3}onResize(){this.canvasWidth=this.getCanvasWidth(),this.canvasHeight=this.getCanvasHeight(),this.resizeCanvas(),this.initStars()}observeThemeChanges(){const t=document.documentElement;this.updateStarColor(),new MutationObserver(()=>{this.updateStarColor()}).observe(t,{attributes:!0,attributeFilter:["class"]})}updateStarColor(){document.documentElement.classList.contains("dark")?this.starColor="0, 0, 0":this.starColor="255, 255, 255"}}const b=document.querySelector("#stars");new y(b);const S=document.querySelectorAll(".toggle"),E=document.querySelectorAll(".toggle-thumb");let a=!1;const p=window.matchMedia("(prefers-color-scheme: dark)");function d(s){document.documentElement.classList.toggle("dark",s),E.forEach(t=>{t.classList.toggle("active",s)}),a=s}function m(s){localStorage.setItem("dark-theme",String(s))}d(localStorage.getItem("dark-theme")==="true");p.addEventListener("change",()=>{a=!a,d(a),m(a)});S.forEach(s=>{s.addEventListener("change",()=>{a=!a,d(a),m(a)})});window.addEventListener("keydown",s=>{s.altKey===!0&&s.shiftKey===!0&&s.key==="D"&&(a=!a,d(a),m(a))});const L=document.querySelectorAll("section[id]"),C=document.querySelectorAll("#menu a"),u=s=>{C.forEach(t=>{s&&t.href.includes(`#${s}`)||!s&&t.href.includes("#top")?t.classList.add("active"):t.classList.remove("active")})},M=new IntersectionObserver(s=>{let t=null,e=!1;s.forEach(i=>{i.isIntersecting&&(e=!0,t=i.target.id)}),!e&&window.scrollY===0?u(null):e&&u(t)},{threshold:.1,rootMargin:"0px 0px -40% 0px"});L.forEach(s=>M.observe(s));window.addEventListener("scroll",()=>{window.scrollY===0&&u(null)});const A=document.querySelector("#menu-button"),v=document.querySelector("dialog"),I=document.querySelector("#close"),z=document.querySelectorAll("dialog a");A?.addEventListener("click",()=>{document.body.classList.add("no-scroll"),v?.showModal()});I?.addEventListener("click",()=>{document.body.classList.remove("no-scroll"),v?.close()});z.forEach(s=>{s.addEventListener("click",()=>{document.body.classList.remove("no-scroll"),v?.close()})});
